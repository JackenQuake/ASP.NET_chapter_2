### Tasks description for Lesson 3:

#### Комментарии:

Задания к уроку 3 выполнены.

Структура проекта содержит три папки, соответствующие слоям Контроллер-Модель-Репозиторий. При этом на уровне контроллера используется класс PersonDto, а на уровне Модели и в Репозитории - PersonStorage (они идентичны). Для преобразования между ними подключен AutoMapper; кроме этого, я подключил Logging, Dependency Injections и Swagger для тестирования запросов - это было в предыдущем курсе.

Чтобы уровень модели был немного более содержательным, я перенес на него фильтрацию выборки из репозитория. Вероятно, в дальшейшем это будет возложено на SQL, но пока репозиторий построен на коллекциях, так вполне можно. Таким образом, репозиторий хранит список PersonStorage и обеспечивает операции добавления-изменения-удаления-поиска, а по запросу GetAll возвращает весь список (с преобразованием в неизменяемую коллекцию, чтобы его нельзя было испортить с других уровней). На лекции упомянули конструкию parial class, я воспользовался ею, чтобы перенести в другой файл тестовый массив данных из методички.

На уровне модели реализуется преобразование типов и фильтрация - выбор из базы данных записей по запросу. На лекции было рассказано про делегаты, и я решил их использовать следующим образом: есть одна универсальная функция для выборки - Get, которая принимает делегат типа "предикат", проверяющий, нужно ли включать запись в выборку, а также параметры skip и take для пагинации. Эта функция реализует и преобразование PersonStorage в PersonDto, и должна быть эффективной - преобразуются только те записи, которые нужны. А другие функции GetX после этого являются простыми обертками для этой, предоставляющими ей нужный предикат. По-моему, это красивое использование делегатов, позволяющее по необходимости без труда добавлять другие запросы GetX с другими условиями без копирования кода выборки.
